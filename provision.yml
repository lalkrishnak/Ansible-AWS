- name: Launching Instance
  ec2:
    aws_access_key: "{{ ec2_access_key }}"
    aws_secret_key: "{{ ec2_secret_key }}"
    key_name: "ansible-key"
    group: "my_security_group"
    instance_type: "{{ ec2_instance_type }}"
    image: "{{ ec2_ami }}"
    vpc_subnet_id: "{{ ec2_subnet_id }}"
    region: "{{ ec2_region }}"
    instance_tags: '{"Name":"{{ec2_tag_Name}}","Type":"{{ec2_tag_Type}}","Environment":"{{ec2_tag_Environment}}"}'
    wait: true
    count: 1
    assign_public_ip: yes
    volumes:
    - device_name: /dev/sda1
      volume_size: "{{ ec2_volume_size }}"
      delete_on_termination: true
  register: ec2
